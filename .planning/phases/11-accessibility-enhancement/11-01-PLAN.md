---
phase: 11-accessibility-enhancement
plan: 01
type: execute
---

<objective>
Create a floating accessibility toolbar that's always visible for quick access to accessibility settings.

Purpose: Replace modal-based accessibility menu with an always-visible, floating toolbar for easier access to text size, contrast, and motion controls.
Output: Floating AccessibilityToolbar component integrated into the app layout.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/10-design-foundation/10-01-SUMMARY.md
@.planning/phases/10-design-foundation/10-02-SUMMARY.md

**Existing infrastructure:**
@frontend/src/contexts/AccessibilityContext.jsx
@frontend/src/components/accessibility/AccessibilityMenu.jsx
@frontend/src/index.css

**Tech available:** CSS custom properties for high contrast (data-contrast), font modes (data-font)
**Patterns:** Toggle via data attributes on root element, minds color palette

**Design specification:**
- Floating toolbar fixed to bottom-right of viewport
- Coral background with white icons
- 48px touch targets minimum
- Collapsible to single button when not in use
- Controls: Text size (A-/A/A+), High contrast toggle, Reduce motion toggle
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AccessibilityToolbar component</name>
  <files>frontend/src/components/accessibility/AccessibilityToolbar.jsx</files>
  <action>
Create a floating accessibility toolbar component with:

Structure:
- Fixed position bottom-right (bottom-6 right-6)
- Collapsed state: single circular button with accessibility icon
- Expanded state: horizontal bar with controls
- Uses minds-coral background, white icons
- All buttons 48px minimum touch target

Controls when expanded:
1. Text size: Three buttons (A-, A, A+) mapping to small/medium/large
2. High contrast: Toggle button with sun/moon icon
3. Reduce motion: Toggle button with motion icon
4. Close/collapse button

Use useAccessibility hook for state
Add aria-labels for screen readers
Support keyboard navigation (Tab through controls, Escape to close)

Use lucide-react icons: Accessibility, Type, Sun, Moon, Zap, ZapOff, X, ChevronUp
Apply rounded-2xl, shadow-lg, transition-all for smooth expand/collapse
  </action>
  <verify>Component renders without errors, shows collapsed button by default</verify>
  <done>Toolbar shows accessibility icon, expands on click to reveal controls, all controls have 48px touch targets</done>
</task>

<task type="auto">
  <name>Task 2: Integrate toolbar into App layout</name>
  <files>frontend/src/App.jsx</files>
  <action>
Import and add AccessibilityToolbar to the App component:

1. Import AccessibilityToolbar from components/accessibility/AccessibilityToolbar
2. Add AccessibilityToolbar inside the AccessibilityProvider, after the main content
3. Position it so it appears on all pages (inside Router but outside Routes)

The toolbar should be visible on all pages, floating above other content with z-50.
  </action>
  <verify>Toolbar appears on all pages, doesn't interfere with page content</verify>
  <done>Toolbar visible site-wide, controls work (text size, contrast, motion)</done>
</task>

<task type="auto">
  <name>Task 3: Update AccessibilityContext to apply data attributes</name>
  <files>frontend/src/contexts/AccessibilityContext.jsx, frontend/src/index.css</files>
  <action>
Update the context to properly apply data attributes for CSS variable switching:

1. In the fontSize useEffect, set data-font-size attribute:
   - document.documentElement.setAttribute('data-font-size', fontSize)

2. In the contrast useEffect, set data-contrast attribute:
   - document.documentElement.setAttribute('data-contrast', contrast)
   - Remove old className approach (font-${fontSize} contrast-${contrast})

3. Add CSS to index.css for font size scaling:
   [data-font-size="small"] { font-size: 14px; }
   [data-font-size="medium"] { font-size: 16px; }
   [data-font-size="large"] { font-size: 18px; }

This ensures CSS custom properties and font sizes respond to toolbar controls.
  </action>
  <verify>Changing text size in toolbar visibly changes page font size, high contrast toggles theme</verify>
  <done>Font size changes apply immediately, high contrast mode toggles correctly via data attributes</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] cd frontend && npm run build succeeds without errors
- [ ] Toolbar appears floating at bottom-right on all pages
- [ ] Text size buttons change page font size (A-, A, A+)
- [ ] High contrast toggle switches to yellow-on-black theme
- [ ] Reduce motion toggle disables animations
- [ ] All controls have 48px minimum touch targets
- [ ] Toolbar is keyboard accessible (Tab, Enter, Escape)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No build errors
- Toolbar accessible via keyboard and touch
</success_criteria>

<output>
After completion, create .planning/phases/11-accessibility-enhancement/11-01-SUMMARY.md
</output>
