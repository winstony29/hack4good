---
phase: 06-animations-transitions
plan: 02
type: execute
---

<objective>
Add modal and page transition animations for smooth navigation flow.

Purpose: Create cohesive app experience with enter/exit animations on modals and route changes.
Output: Animated Modal.jsx with framer-motion, page transition wrapper for React Router routes.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-animations-transitions/06-01-SUMMARY.md

# Key files for this plan:
@frontend/src/components/shared/Modal.jsx
@frontend/src/App.jsx

# Established patterns (from MatchAnimation.jsx):
- AnimatePresence for mount/unmount animations
- initial={{ opacity: 0 }}, animate={{ opacity: 1 }}, exit={{ opacity: 0 }}
- Backdrop: backdrop-blur-sm with opacity transition
- Content: scale + opacity animation with spring transition
- Respect reduceMotion via AccessibilityContext

**Tech stack available:** framer-motion 10.16.16, react-router-dom 6.20.1
**Key reference:** frontend/src/components/volunteer/MatchAnimation.jsx for modal animation patterns
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add framer-motion animations to Modal component</name>
  <files>frontend/src/components/shared/Modal.jsx</files>
  <action>
    Add framer-motion animations following MatchAnimation.jsx pattern:

    1. Import: `import { motion, AnimatePresence } from 'framer-motion'`
    2. Import: `import { useAccessibility } from '../../contexts/AccessibilityContext'`
    3. Get reduceMotion from useAccessibility hook
    4. Wrap the entire return in AnimatePresence
    5. Convert backdrop div to motion.div with:
       - initial={{ opacity: 0 }}
       - animate={{ opacity: 1 }}
       - exit={{ opacity: 0 }}
       - transition based on reduceMotion (instant or 0.2s)
    6. Convert modal content div to motion.div with:
       - initial={{ opacity: 0, scale: reduceMotion ? 1 : 0.95 }}
       - animate={{ opacity: 1, scale: 1 }}
       - exit={{ opacity: 0, scale: reduceMotion ? 1 : 0.95 }}
       - transition: spring for normal, tween for reduceMotion

    Keep existing:
    - Escape key handler
    - Body overflow management
    - Size variants
    - Header, content, footer structure
    - onClick handlers for backdrop/stopPropagation

    WHY: Modal should feel like it "pops in" smoothly rather than appearing instantly.
  </action>
  <verify>
    1. Run: npm run dev
    2. Visit localhost:5173/activities
    3. Click on any activity date to open DayActivitiesModal
    4. Modal should fade in with subtle scale-up
    5. Close modal (click backdrop or X) - should fade out smoothly
    6. Toggle reduce motion - animations should become instant
  </verify>
  <done>Modal has smooth enter/exit animations, respects reduceMotion, all existing functionality preserved</done>
</task>

<task type="auto">
  <name>Task 2: Add page transitions to route changes</name>
  <files>frontend/src/App.jsx, frontend/src/components/layout/PageTransition.jsx (create)</files>
  <action>
    Create PageTransition wrapper component and integrate with routes:

    1. Create new file: frontend/src/components/layout/PageTransition.jsx
       - Wrapper component using motion.div
       - Props: children
       - Animation:
         - initial={{ opacity: 0, y: 10 }}
         - animate={{ opacity: 1, y: 0 }}
         - exit={{ opacity: 0, y: -10 }}
         - transition={{ duration: 0.2 }} or instant for reduceMotion
       - Use useAccessibility for reduceMotion

    2. In App.jsx:
       - Import AnimatePresence from framer-motion
       - Import PageTransition from './components/layout/PageTransition'
       - Wrap Routes in AnimatePresence with mode="wait"
       - Use useLocation hook to provide key to Routes
       - Wrap each Route's element in PageTransition

    Pattern:
    ```jsx
    <AnimatePresence mode="wait">
      <Routes location={location} key={location.pathname}>
        <Route path="/" element={<PageTransition><Landing /></PageTransition>} />
        ...
      </Routes>
    </AnimatePresence>
    ```

    WHY: Page transitions reduce perceived navigation jank and create flow.
    NOTE: Use mode="wait" so exit animation completes before enter begins.
  </action>
  <verify>
    1. Run: npm run dev
    2. Visit localhost:5173
    3. Navigate: Landing -> Auth -> Dashboard -> Activities
    4. Each page should fade in with subtle upward motion
    5. Back navigation should also animate
    6. Toggle reduce motion - transitions should become instant
    7. Run: npm run lint - no errors
  </verify>
  <done>Page transitions animate on route changes, respects reduceMotion, navigation feels smooth</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors in frontend/
- [ ] `npm run lint` passes
- [ ] Modal animations visible on open/close
- [ ] Page transitions visible on route changes
- [ ] Reduce motion toggle disables animations
- [ ] No navigation bugs introduced (all routes still work)
</verification>

<success_criteria>

- Both tasks completed
- All verification checks pass
- No errors introduced
- Animations feel cohesive with existing swiper animations
- Accessibility preserved (reduceMotion respected)
- Phase 6 complete
</success_criteria>

<output>
After completion, create `.planning/phases/06-animations-transitions/06-02-SUMMARY.md`
</output>
