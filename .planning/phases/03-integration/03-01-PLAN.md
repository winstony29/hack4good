---
phase: 03-integration
plan: 01
type: execute
---

<objective>
Wire accessibility features into volunteer swiper - reduce motion support and TTS for activity cards.

Purpose: Make the volunteer swiper accessible to users who prefer reduced motion or need text-to-speech.
Output: Updated SwipeableCard, MatchAnimation, and ActivitySwiper components respecting accessibility preferences.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./03-01-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior Phase Summaries
@.planning/phases/01-volunteer-swiper/01-05-SUMMARY.md
@.planning/phases/02-experience-lead/02-01-SUMMARY.md

# Key Files to Modify
@frontend/src/components/volunteer/SwipeableCard.jsx
@frontend/src/components/volunteer/MatchAnimation.jsx
@frontend/src/components/volunteer/ActivitySwiper.jsx
@frontend/src/contexts/AccessibilityContext.jsx
@frontend/src/components/accessibility/TTSButton.jsx

**Tech stack available:** framer-motion, canvas-confetti, React Context, Tailwind CSS
**Established patterns:** useAccessibility() hook for accessing accessibility state, CSS custom properties for theming

**Constraining decisions:**
- Phase 01-03: 100px swipe threshold for intentional swipes
- Phase 01-05: 2.5s auto-dismiss for celebration, green confetti colors
- Phase 02-01: CSS custom properties (--a11y-*) for runtime theming
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add reduce motion support to SwipeableCard</name>
  <files>frontend/src/components/volunteer/SwipeableCard.jsx</files>
  <action>
Import `useAccessibility` from AccessibilityContext. When `reduceMotion` is true:
- Replace animated transitions with instant (`duration: 0.01`)
- Keep card position tracking (x motion value) for swipe detection
- Keep swipe indicators but disable their animations
- Maintain snap-back behavior but make it instant

Key changes:
1. Add import: `import { useAccessibility } from '../../contexts/AccessibilityContext'`
2. Get reduceMotion: `const { reduceMotion } = useAccessibility()`
3. Create duration variable: `const animDuration = reduceMotion ? 0.01 : 0.3`
4. Replace hardcoded `duration: 0.3` with `duration: animDuration`
5. For snap-back spring, use `type: reduceMotion ? 'tween' : 'spring'` with `duration: reduceMotion ? 0.01 : undefined`

DO NOT remove the animation logic entirely - just make it instant. This preserves the visual feedback while respecting user preference.
  </action>
  <verify>
1. `npm run build` in frontend succeeds
2. Manual: Visit /swiper with reduceMotion off - cards animate smoothly
3. Manual: Enable reduceMotion in AccessibilityMenu - cards move instantly without spring animations
  </verify>
  <done>SwipeableCard respects reduceMotion - animations instant when enabled, normal when disabled</done>
</task>

<task type="auto">
  <name>Task 2: Add reduce motion support to MatchAnimation</name>
  <files>frontend/src/components/volunteer/MatchAnimation.jsx</files>
  <action>
Import `useAccessibility` and conditionally disable confetti and spring animations.

Key changes:
1. Add import: `import { useAccessibility } from '../../contexts/AccessibilityContext'`
2. Get reduceMotion: `const { reduceMotion } = useAccessibility()`
3. Skip confetti when reduceMotion: wrap `confetti()` call in `if (!reduceMotion) { ... }`
4. Replace spring animations with simple opacity/position changes when reduceMotion:
   - Change `type: 'spring'` to `type: reduceMotion ? 'tween' : 'spring'`
   - Add `duration: reduceMotion ? 0.1 : undefined` to transitions
5. Keep the overlay and content visible - just remove the bouncy effects

The celebration should still appear (accessibility doesn't mean removing feedback), but without the motion that could cause discomfort.
  </action>
  <verify>
1. `npm run build` in frontend succeeds
2. Manual: Swipe right with reduceMotion off - confetti fires, bouncy animation plays
3. Manual: Enable reduceMotion, swipe right - celebration appears but no confetti, no bounce
  </verify>
  <done>MatchAnimation respects reduceMotion - confetti and bounces disabled when enabled</done>
</task>

<task type="auto">
  <name>Task 3: Add TTS button to activity cards in swiper</name>
  <files>frontend/src/components/volunteer/SwipeableCard.jsx, frontend/src/components/activities/ActivityCard.jsx</files>
  <action>
Add a TTS button to activity cards that reads the activity title and description.

Option A (Preferred - modify ActivityCard): If ActivityCard is used elsewhere and should have TTS:
1. Import TTSButton in ActivityCard.jsx
2. Add optional `showTTS` prop with default `false`
3. When `showTTS` is true, render TTSButton with text = `${activity.title}. ${activity.description}`
4. Position the button in the card footer area

Option B (Swiper-specific): If TTS is swiper-only:
1. Import TTSButton in SwipeableCard.jsx
2. Add TTSButton below ActivityCard in the card wrapper
3. Pass text = `${activity.title}. ${activity.description}`

Choose Option A as it's more reusable. ActivityCard should accept `showTTS` prop.

In SwipeableCard.jsx, pass `showTTS={true}` to ActivityCard for the top card only (isTop).

Position the TTS button so it doesn't interfere with swipe gestures - bottom of card, small size.
  </action>
  <verify>
1. `npm run build` in frontend succeeds
2. Manual: Visit /swiper - TTS button appears on the top activity card
3. Manual: Click TTS button - audio plays (or mock response in dev mode)
4. TTS button doesn't appear on stacked cards behind
  </verify>
  <done>TTS button on activity cards allows users to hear activity details read aloud</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd frontend && npm run build` succeeds without errors
- [ ] `cd frontend && npm run lint` passes (or only pre-existing warnings)
- [ ] SwipeableCard imports and uses reduceMotion
- [ ] MatchAnimation imports and uses reduceMotion
- [ ] ActivityCard has optional TTS support
- [ ] Manual test: reduceMotion toggle affects swiper animations
</verification>

<success_criteria>

- All 3 tasks completed
- All verification checks pass
- No new TypeScript/ESLint errors introduced
- Reduce motion preference respected in swiper
- TTS available on activity cards
</success_criteria>

<output>
After completion, create `.planning/phases/03-integration/03-01-SUMMARY.md`:

# Phase 03 Plan 01: Accessibility Integration Summary

**[One-liner describing what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]
- [Key outcome 3]

## Files Created/Modified

- `frontend/src/components/volunteer/SwipeableCard.jsx` - Added reduceMotion support
- `frontend/src/components/volunteer/MatchAnimation.jsx` - Added reduceMotion support
- `frontend/src/components/activities/ActivityCard.jsx` - Added optional TTS button

## Decisions Made

[Key decisions and rationale]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 03 complete. Integration of Person 3 + Person 4 work finished.
</output>
